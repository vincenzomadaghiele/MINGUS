{"remainingRequest":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/babel-loader/lib/index.js!/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/src/components/End.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/src/components/End.vue","mtime":1617975235779},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7ClZ1ZS51c2UoVnVlUm91dGVyKTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByYXRlZFR1bmVzOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHBvc3RSYXRlZFR1bmVzOiBmdW5jdGlvbiBwb3N0UmF0ZWRUdW5lcyhyYXRlZFR1bmVzKSB7CiAgICAgIHZhciBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC90dW5lcyc7IC8vIHNlbmQgcmF0ZWRUdW5lcyB0byBzZXJ2ZXIKCiAgICAgIGF4aW9zLnBvc3QocGF0aCwgcmF0ZWRUdW5lcykudGhlbihmdW5jdGlvbiAoKSB7Ly8gZ2V0IGFuc3dlcgogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0UXVpejogZnVuY3Rpb24gc3VibWl0UXVpeigpIHsKICAgICAgLy8gY2hlY2sgdGhhdCBhbGwgdHVuZXMgaGF2ZSBiZWVuIHZvdGVkCiAgICAgIHZhciBhbGxUdW5lc1ZvdGVkID0gdHJ1ZTsKICAgICAgdmFyIHJldHJpZXZlZFJhdGluZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmF0ZWQtdHVuZXMnKTsKICAgICAgdmFyIHBhcnNlZFJhdGluZ3MgPSBKU09OLnBhcnNlKHJldHJpZXZlZFJhdGluZ3MpOwogICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHBhcnNlZFJhdGluZ3MpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgaWYgKHBhcnNlZFJhdGluZ3Nba2V5c1tpXV0gPT09IDApIHsKICAgICAgICAgIGFsbFR1bmVzVm90ZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChhbGxUdW5lc1ZvdGVkKSB7CiAgICAgICAgLy8gZ2V0IHJhdGVkVHVuZXMgZnJvbSBsb2NhbCBzdG9yYWdlCiAgICAgICAgLy8gZ2V0IGNvbW1lbnRzIGZyb20gbG9jYWwgc3RvcmFnZQogICAgICAgIHZhciByZXRyaWV2ZWRDb21tZW50cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb21tZW50cycpOwogICAgICAgIHZhciBwYXJzZWRDb21tZW50cyA9IEpTT04ucGFyc2UocmV0cmlldmVkQ29tbWVudHMpOyAvLyBmb3JtIHRoZSBwYXlsb2FkIGZvciB0aGUgUE9TVCByZXF1ZXN0IHRvIHNlcnZlcgoKICAgICAgICB0aGlzLnJhdGVkVHVuZXMubXVzaWNFeHBlcmllbmNlID0gbG9jYWxTdG9yYWdlLm11c2ljRXhwZXJpZW5jZTsKICAgICAgICB0aGlzLnJhdGVkVHVuZXMucmF0aW5ncyA9IHBhcnNlZFJhdGluZ3M7CiAgICAgICAgdGhpcy5yYXRlZFR1bmVzLmNvbW1lbnRzID0gcGFyc2VkQ29tbWVudHM7IC8vIGxvZyB0aGUgcGF5bG9hZCB0byBjaGVjawoKICAgICAgICB0aGlzLnBvc3RSYXRlZFR1bmVzKHRoaXMucmF0ZWRUdW5lcyk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zdW1tYXJ5Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoIllvdSBoYXZlbid0IHZvdGVkIG9uIGFsbCB0dW5lcywgcGxlYXNlIGdvIGJhY2sgYW5kIHZvdGUgb24gYWxsIHR1bmVzIik7CiAgICAgIH0KICAgIH0sCiAgICBiYWNrVG9RdWl6OiBmdW5jdGlvbiBiYWNrVG9RdWl6KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3R1bmVzJyk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30KfTs="},{"version":3,"sources":["End.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,SAAA,MAAA,YAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,GAAA,CAAA,GAAA,CAAA,SAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,UAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,UADA,EACA;AACA,UAAA,IAAA,GAAA,6BAAA,CADA,CAEA;;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,IAAA,EAAA,UAAA,EACA,IADA,CACA,YAAA,CACA;AACA,OAHA,EAIA,KAJA,CAIA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,OANA;AAOA,KAXA;AAYA,IAAA,UAZA,wBAYA;AACA;AACA,UAAA,aAAA,GAAA,IAAA;AACA,UAAA,gBAAA,GAAA,YAAA,CAAA,OAAA,CAAA,aAAA,CAAA;AACA,UAAA,aAAA,GAAA,IAAA,CAAA,KAAA,CAAA,gBAAA,CAAA;AACA,UAAA,IAAA,GAAA,MAAA,CAAA,IAAA,CAAA,aAAA,CAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,IAAA,CAAA,MAAA,EAAA,CAAA,IAAA,CAAA,EAAA;AACA,YAAA,aAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,EAAA;AACA,UAAA,aAAA,GAAA,KAAA;AACA;AACA;;AACA,UAAA,aAAA,EAAA;AACA;AACA;AACA,YAAA,iBAAA,GAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA;AACA,YAAA,cAAA,GAAA,IAAA,CAAA,KAAA,CAAA,iBAAA,CAAA,CAJA,CAKA;;AACA,aAAA,UAAA,CAAA,eAAA,GAAA,YAAA,CAAA,eAAA;AACA,aAAA,UAAA,CAAA,OAAA,GAAA,aAAA;AACA,aAAA,UAAA,CAAA,QAAA,GAAA,cAAA,CARA,CASA;;AACA,aAAA,cAAA,CAAA,KAAA,UAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,OAZA,MAYA;AACA,QAAA,KAAA,CAAA,sEAAA,CAAA;AACA;AACA,KAtCA;AAuCA,IAAA,UAvCA,wBAuCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA;AAzCA,GANA;AAiDA,EAAA,OAjDA,qBAiDA,CACA;AAlDA,CAAA","sourcesContent":["<template>\n<!-- eslint-disable --> \n    <div class=\"container\">\n        <div class=\"row text-center\">\n            <div class=\"col-lg-3\"></div>\n            <div class=\"col-lg-6\">\n                <h4>Thank you for partecipating to the quiz!</h4>\n            </div>\n            <div class=\"col-lg-3\"></div>\n        </div>\n        <br>\n        <div class=\"row text-center\">\n            <div class=\"col-lg-2\"></div>\n            <div class=\"col-lg-8\">\n                <p>You can now submit your answers and discover which \n                    musical phrases were original and which were generated \n                    by a machine learning model.</p>\n            </div>\n            <div class=\"col-lg-2\"></div>\n        </div>\n        <br><br>\n        <div class=\"row text-center\">\n            <div class=\"col-1 col-lg-2\"></div>\n                <div class=\"col-5 col-lg-4\">\n                  <button type=\"button\" class=\"btn btn-secondary\" @click=\"backToQuiz\">Go back to the quiz</button>\n                </div>\n                <div class=\"col-5 col-lg-4\">\n                  <button type=\"button\" class=\"btn btn-primary\" @click=\"submitQuiz\">Submit and see summary</button>\n                </div>\n            </div>\n            <div class=\"col-1 col-lg-2\"></div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport axios from 'axios';\n\nVue.use(VueRouter);\n\nexport default {\n  data() {\n    return {\n      ratedTunes: {},\n    };\n  },\n  methods: {\n    postRatedTunes(ratedTunes) {\n      const path = 'http://localhost:5000/tunes';\n      // send ratedTunes to server\n      axios.post(path, ratedTunes)\n        .then(() => {\n          // get answer\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    submitQuiz() {\n      // check that all tunes have been voted\n      let allTunesVoted = true;\n      const retrievedRatings = localStorage.getItem('rated-tunes');\n      const parsedRatings = JSON.parse(retrievedRatings);\n      const keys = Object.keys(parsedRatings);\n      for (let i = 0; i < keys.length; i += 1) {\n        if (parsedRatings[keys[i]] === 0) {\n          allTunesVoted = false;\n        }\n      }\n      if (allTunesVoted) {\n        // get ratedTunes from local storage\n        // get comments from local storage\n        const retrievedComments = localStorage.getItem('comments');\n        const parsedComments = JSON.parse(retrievedComments);\n        // form the payload for the POST request to server\n        this.ratedTunes.musicExperience = localStorage.musicExperience;\n        this.ratedTunes.ratings = parsedRatings;\n        this.ratedTunes.comments = parsedComments;\n        // log the payload to check\n        this.postRatedTunes(this.ratedTunes);\n        this.$router.push('/summary');\n      } else {\n        alert(\"You haven't voted on all tunes, please go back and vote on all tunes\");\n      }\n    },\n    backToQuiz() {\n      this.$router.push('/tunes');\n    },\n  },\n  created() {\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}