{"remainingRequest":"/Users/vincenzomadaghiele/Desktop/Semester_project/04_project/app-rate-tunes/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vincenzomadaghiele/Desktop/Semester_project/04_project/app-rate-tunes/client/src/components/End.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/04_project/app-rate-tunes/client/src/components/End.vue","mtime":1617975235779},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/04_project/app-rate-tunes/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/04_project/app-rate-tunes/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/04_project/app-rate-tunes/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/04_project/app-rate-tunes/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKClZ1ZS51c2UoVnVlUm91dGVyKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmF0ZWRUdW5lczoge30sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcG9zdFJhdGVkVHVuZXMocmF0ZWRUdW5lcykgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC90dW5lcyc7CiAgICAgIC8vIHNlbmQgcmF0ZWRUdW5lcyB0byBzZXJ2ZXIKICAgICAgYXhpb3MucG9zdChwYXRoLCByYXRlZFR1bmVzKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIGdldCBhbnN3ZXIKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdFF1aXooKSB7CiAgICAgIC8vIGNoZWNrIHRoYXQgYWxsIHR1bmVzIGhhdmUgYmVlbiB2b3RlZAogICAgICBsZXQgYWxsVHVuZXNWb3RlZCA9IHRydWU7CiAgICAgIGNvbnN0IHJldHJpZXZlZFJhdGluZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmF0ZWQtdHVuZXMnKTsKICAgICAgY29uc3QgcGFyc2VkUmF0aW5ncyA9IEpTT04ucGFyc2UocmV0cmlldmVkUmF0aW5ncyk7CiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwYXJzZWRSYXRpbmdzKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgaWYgKHBhcnNlZFJhdGluZ3Nba2V5c1tpXV0gPT09IDApIHsKICAgICAgICAgIGFsbFR1bmVzVm90ZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGFsbFR1bmVzVm90ZWQpIHsKICAgICAgICAvLyBnZXQgcmF0ZWRUdW5lcyBmcm9tIGxvY2FsIHN0b3JhZ2UKICAgICAgICAvLyBnZXQgY29tbWVudHMgZnJvbSBsb2NhbCBzdG9yYWdlCiAgICAgICAgY29uc3QgcmV0cmlldmVkQ29tbWVudHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY29tbWVudHMnKTsKICAgICAgICBjb25zdCBwYXJzZWRDb21tZW50cyA9IEpTT04ucGFyc2UocmV0cmlldmVkQ29tbWVudHMpOwogICAgICAgIC8vIGZvcm0gdGhlIHBheWxvYWQgZm9yIHRoZSBQT1NUIHJlcXVlc3QgdG8gc2VydmVyCiAgICAgICAgdGhpcy5yYXRlZFR1bmVzLm11c2ljRXhwZXJpZW5jZSA9IGxvY2FsU3RvcmFnZS5tdXNpY0V4cGVyaWVuY2U7CiAgICAgICAgdGhpcy5yYXRlZFR1bmVzLnJhdGluZ3MgPSBwYXJzZWRSYXRpbmdzOwogICAgICAgIHRoaXMucmF0ZWRUdW5lcy5jb21tZW50cyA9IHBhcnNlZENvbW1lbnRzOwogICAgICAgIC8vIGxvZyB0aGUgcGF5bG9hZCB0byBjaGVjawogICAgICAgIHRoaXMucG9zdFJhdGVkVHVuZXModGhpcy5yYXRlZFR1bmVzKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3N1bW1hcnknKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgiWW91IGhhdmVuJ3Qgdm90ZWQgb24gYWxsIHR1bmVzLCBwbGVhc2UgZ28gYmFjayBhbmQgdm90ZSBvbiBhbGwgdHVuZXMiKTsKICAgICAgfQogICAgfSwKICAgIGJhY2tUb1F1aXooKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdHVuZXMnKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogIH0sCn07Cg=="},{"version":3,"sources":["End.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"End.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<!-- eslint-disable --> \n    <div class=\"container\">\n        <div class=\"row text-center\">\n            <div class=\"col-lg-3\"></div>\n            <div class=\"col-lg-6\">\n                <h4>Thank you for partecipating to the quiz!</h4>\n            </div>\n            <div class=\"col-lg-3\"></div>\n        </div>\n        <br>\n        <div class=\"row text-center\">\n            <div class=\"col-lg-2\"></div>\n            <div class=\"col-lg-8\">\n                <p>You can now submit your answers and discover which \n                    musical phrases were original and which were generated \n                    by a machine learning model.</p>\n            </div>\n            <div class=\"col-lg-2\"></div>\n        </div>\n        <br><br>\n        <div class=\"row text-center\">\n            <div class=\"col-1 col-lg-2\"></div>\n                <div class=\"col-5 col-lg-4\">\n                  <button type=\"button\" class=\"btn btn-secondary\" @click=\"backToQuiz\">Go back to the quiz</button>\n                </div>\n                <div class=\"col-5 col-lg-4\">\n                  <button type=\"button\" class=\"btn btn-primary\" @click=\"submitQuiz\">Submit and see summary</button>\n                </div>\n            </div>\n            <div class=\"col-1 col-lg-2\"></div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport axios from 'axios';\n\nVue.use(VueRouter);\n\nexport default {\n  data() {\n    return {\n      ratedTunes: {},\n    };\n  },\n  methods: {\n    postRatedTunes(ratedTunes) {\n      const path = 'http://localhost:5000/tunes';\n      // send ratedTunes to server\n      axios.post(path, ratedTunes)\n        .then(() => {\n          // get answer\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    submitQuiz() {\n      // check that all tunes have been voted\n      let allTunesVoted = true;\n      const retrievedRatings = localStorage.getItem('rated-tunes');\n      const parsedRatings = JSON.parse(retrievedRatings);\n      const keys = Object.keys(parsedRatings);\n      for (let i = 0; i < keys.length; i += 1) {\n        if (parsedRatings[keys[i]] === 0) {\n          allTunesVoted = false;\n        }\n      }\n      if (allTunesVoted) {\n        // get ratedTunes from local storage\n        // get comments from local storage\n        const retrievedComments = localStorage.getItem('comments');\n        const parsedComments = JSON.parse(retrievedComments);\n        // form the payload for the POST request to server\n        this.ratedTunes.musicExperience = localStorage.musicExperience;\n        this.ratedTunes.ratings = parsedRatings;\n        this.ratedTunes.comments = parsedComments;\n        // log the payload to check\n        this.postRatedTunes(this.ratedTunes);\n        this.$router.push('/summary');\n      } else {\n        alert(\"You haven't voted on all tunes, please go back and vote on all tunes\");\n      }\n    },\n    backToQuiz() {\n      this.$router.push('/tunes');\n    },\n  },\n  created() {\n  },\n};\n</script>\n"]}]}