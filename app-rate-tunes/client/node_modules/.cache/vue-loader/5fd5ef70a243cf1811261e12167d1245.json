{"remainingRequest":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/src/components/Tunes.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/src/components/Tunes.vue","mtime":1618489782655},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vincenzomadaghiele/Desktop/Semester_project/05_app/rate-tunes/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY3Vyc29yLWNoYW5nZSB7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgoucmF0aW5ncyB7CiAgbGlzdC1zdHlsZS10eXBlOiBub25lOwogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwOwogIHdpZHRoOiAxMDAlOwogIGRpcmVjdGlvbjogcnRsOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKLnN0YXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBsaW5lLWhlaWdodDogMzBweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgdHJhbnNpdGlvbjogY29sb3IgMC4ycyBlYXNlOwogIGNvbG9yOiAjZWJlYmViOwp9Cgouc3RhcjpiZWZvcmUgewogIGNvbnRlbnQ6ICdcMjYwNSc7CiAgd2lkdGg6IDMwcHg7CiAgaGVpZ2h0OiAzMHB4OwogIGZvbnQtc2l6ZTogMzBweDsKfQoKLnN0YXI6aG92ZXIsCi5zdGFyLnNlbGVjdGVkLAouc3Rhcjpob3ZlciB+IC5zdGFyLAouc3Rhci5zZWxlY3RlZCB+IC5zdGFyewogIHRyYW5zaXRpb246IGNvbG9yIDAuOHMgZWFzZTsKICBjb2xvcjogYmxhY2s7Cn0K"},{"version":3,"sources":["Tunes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6NA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tunes.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<!-- eslint-disable --> \n<div class=\"row\" v-if=\"dataReady\">\n<div class=\"col-lg-3 col-sm-0\"></div>\n<div class=\"container col-lg-6\">\n  <div class=\"container\">\n    <div class=\"text-center\">\n        <h2>{{ tunes[indcator].title }}</h2>\n        <h4>{{ tunes[indcator].author }}</h4>\n        <h5>{{ tunes[indcator].sample }}</h5>\n    </div>\n    <br><br>\n    <div class=\"container\">\n        <div class=\"row text-center\">\n            <div class=\"col\">\n              <div :key=\"indcator\">\n                <audio style=\"width: 90%\" controls id=\"myVideo\">\n                  <source v-bind:src=\"tunes[indcator].url\" type=\"audio/mp3\" :key=\"indcator\" >\n                  Your browser does not support the audio element.\n                </audio>\n              </div>\n            </div>\n        </div>\n        <br><br>\n        <div class=\"row text-center\">\n          <div class=\"col\">\n            <h6>How much do you like this musical phrase?</h6>\n          </div>\n        </div>\n        <br>\n        <div class=\"row text-center\">\n            <div class=\"col\">\n                <ul class=\"ratings\">\n                    <li class=\"star cursor-change\" v-bind:class=\"{ selected: rating == 5}\" @click=\"onVote(5)\"></li>\n                    <li class=\"star cursor-change\" v-bind:class=\"{ selected: rating == 4}\" @click=\"onVote(4)\"></li>\n                    <li class=\"star cursor-change\" v-bind:class=\"{ selected: rating == 3}\" @click=\"onVote(3)\"></li>\n                    <li class=\"star cursor-change\" v-bind:class=\"{ selected: rating == 2}\" @click=\"onVote(2)\"></li>\n                    <li class=\"star cursor-change\" v-bind:class=\"{ selected: rating == 1}\" @click=\"onVote(1)\"></li>\n                </ul>\n            </div>\n        </div>\n        <br><br>\n        <div class=\"row text-center\">\n          <div class=\"col\">\n            <textarea v-model=\"comment\" rows=\"3\" cols=\"30\" placeholder=\"Why did you vote like this?\">\n            </textarea>\n          </div>\n        </div>\n        <br><br>\n        <div class=\"row text-center\">\n          <div class=\"col-lg-2\"></div>\n            <div class=\"col-6 col-lg-4\">\n                <button type=\"button\" class=\"btn btn-outline-dark\" @click=\"backToInstruction\" v-if=\"indcator == 0\">\n                  Back to instructions\n                </button>\n                <font-awesome-icon icon=\"chevron-left\" class=\"cursor-change\" size=\"3x\" @click=\"tuneBackward\" v-if=\"indcator > 0\"/>\n            </div>\n            <div class=\"col-6 col-lg-4\">\n                <button type=\"button\" class=\"btn btn-outline-dark\" @click=\"endQuiz\" v-if=\"indcator == 5\">\n                  End quiz\n                </button>\n                <font-awesome-icon icon=\"chevron-right\" class=\"cursor-change\" size=\"3x\" @click=\"tuneForward\" v-if=\"indcator < (tunes.length - 1)\"/>\n            </div>\n            <div class=\"col-lg-2\"></div>\n        </div>\n        <br><br>\n    </div>\n  </div>\n</div>\n<div class=\"col-lg-3 col-sm-0\"></div>\n</div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\n\nVue.use(VueRouter);\n\nexport default {\n  data() {\n    return {\n      tunes: [],\n      dataReady: false,\n      rating: 0,\n      indcator: 0,\n      comment: null,\n    };\n  },\n  methods: {\n    getTunes() {\n      const path = 'http://localhost:5000/tunes';\n      const ratings = {};\n      axios.get(path)\n        .then((res) => {\n          if (localStorage.getItem('tunes').length === 0) {\n            this.tunes = res.data.tunes;\n            localStorage.setItem('tunes', JSON.stringify(this.tunes));\n          } else {\n            const retrievedTunes = localStorage.getItem('tunes');\n            const tunes = JSON.parse(retrievedTunes);\n            this.tunes = tunes;\n          }\n          if (localStorage.getItem('rated-tunes').length === 0) {\n            for (let i = 0; i < this.tunes.length; i += 1) {\n              ratings[this.tunes[i].id] = 0;\n            }\n            localStorage.setItem('rated-tunes', JSON.stringify(ratings));\n          } else {\n            const retrievedRatings = localStorage.getItem('rated-tunes');\n            const ratedTunes = JSON.parse(retrievedRatings);\n            this.rating = ratedTunes[this.tunes[this.indcator].id];\n          }\n          if (localStorage.getItem('comments').length === 0) {\n            const comments = {};\n            for (let i = 0; i < this.tunes.length; i += 1) {\n              comments[this.tunes[i].id] = '';\n            }\n            localStorage.setItem('comments', JSON.stringify(comments));\n          } else {\n            const retrievedComments = localStorage.getItem('comments');\n            const comments = JSON.parse(retrievedComments);\n            this.comment = comments[this.tunes[this.indcator].id];\n          }\n          this.dataReady = true;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n        });\n    },\n    tuneForward() {\n      let comments = {};\n      let ratedTunes = {};\n      if (this.indcator < (this.tunes.length - 1)) {\n        if (localStorage.getItem('comments') !== null) {\n          const retrievedObject = localStorage.getItem('comments');\n          comments = JSON.parse(retrievedObject);\n          comments[this.tunes[this.indcator].id] = this.comment;\n          localStorage.setItem('comments', JSON.stringify(comments));\n        }\n        if (localStorage.getItem('rated-tunes') !== null) {\n          const retrievedObject = localStorage.getItem('rated-tunes');\n          ratedTunes = JSON.parse(retrievedObject);\n          ratedTunes[this.tunes[this.indcator].id] = this.rating;\n          localStorage.setItem('rated-tunes', JSON.stringify(ratedTunes));\n        }\n        this.indcator += 1;\n        this.comment = comments[this.tunes[this.indcator].id];\n        this.rating = ratedTunes[this.tunes[this.indcator].id];\n      }\n    },\n    tuneBackward() {\n      let comments = {};\n      let ratedTunes = {};\n      if (this.indcator > 0) {\n        if (localStorage.getItem('comments') !== null) {\n          const retrievedObject = localStorage.getItem('comments');\n          comments = JSON.parse(retrievedObject);\n          comments[this.tunes[this.indcator].id] = this.comment;\n          localStorage.setItem('comments', JSON.stringify(comments));\n        }\n        if (localStorage.getItem('rated-tunes') !== null) {\n          const retrievedObject = localStorage.getItem('rated-tunes');\n          ratedTunes = JSON.parse(retrievedObject);\n          ratedTunes[this.tunes[this.indcator].id] = this.rating;\n          localStorage.setItem('rated-tunes', JSON.stringify(ratedTunes));\n        }\n        this.indcator -= 1;\n        this.comment = comments[this.tunes[this.indcator].id];\n        this.rating = ratedTunes[this.tunes[this.indcator].id];\n      }\n    },\n    onVote(startNum) {\n      this.rating = startNum;\n    },\n    backToInstruction() {\n      let comments = {};\n      let ratedTunes = {};\n      if (this.indcator < (this.tunes.length - 1)) {\n        if (localStorage.getItem('comments') !== null) {\n          const retrievedObject = localStorage.getItem('comments');\n          comments = JSON.parse(retrievedObject);\n          comments[this.tunes[this.indcator].id] = this.comment;\n          localStorage.setItem('comments', JSON.stringify(comments));\n        }\n        if (localStorage.getItem('rated-tunes') !== null) {\n          const retrievedObject = localStorage.getItem('rated-tunes');\n          ratedTunes = JSON.parse(retrievedObject);\n          ratedTunes[this.tunes[this.indcator].id] = this.rating;\n          localStorage.setItem('rated-tunes', JSON.stringify(ratedTunes));\n        }\n        this.comment = comments[this.tunes[this.indcator].id];\n        this.rating = ratedTunes[this.tunes[this.indcator].id];\n      }\n      this.$router.push('/instructions');\n    },\n    endQuiz() {\n      if (localStorage.getItem('comments') !== null) {\n        const retrievedObject = localStorage.getItem('comments');\n        const comments = JSON.parse(retrievedObject);\n        comments[this.tunes[this.indcator].id] = this.comment;\n        localStorage.setItem('comments', JSON.stringify(comments));\n      }\n      if (localStorage.getItem('rated-tunes') !== null) {\n        const retrievedObject = localStorage.getItem('rated-tunes');\n        const ratedTunes = JSON.parse(retrievedObject);\n        ratedTunes[this.tunes[this.indcator].id] = this.rating;\n        localStorage.setItem('rated-tunes', JSON.stringify(ratedTunes));\n      }\n      this.$router.push('/end');\n    },\n  },\n  created() {\n    this.getTunes();\n  },\n};\n</script>\n\n<style>\n.cursor-change {\n  cursor: pointer;\n}\n\n.ratings {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  direction: rtl;\n  text-align: center;\n}\n\n.star {\n  position: relative;\n  line-height: 30px;\n  display: inline-block;\n  transition: color 0.2s ease;\n  color: #ebebeb;\n}\n\n.star:before {\n  content: '\\2605';\n  width: 30px;\n  height: 30px;\n  font-size: 30px;\n}\n\n.star:hover,\n.star.selected,\n.star:hover ~ .star,\n.star.selected ~ .star{\n  transition: color 0.8s ease;\n  color: black;\n}\n</style>\n"]}]}